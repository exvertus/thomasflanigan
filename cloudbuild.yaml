steps:
- id: 'install'
  name: 'python'
  entrypoint: 'pip'
  args: ['install', '-r', 'requirements.txt', '--user']
- id: 'html'
  name: 'python'
  entrypoint: 'python'
  args: ['-m', 'pelican', 'content', '-o', 'output', '-s', 'publishconf.py']
- id: 'build'
  name: 'gcr.io/cloud-builders/docker'
  # args: ['build', '-t', '${_AR_PATH}/$PROJECT_ID/thomasflanigan/${_IMAGE}:$COMMIT_SHA', '.']
  args: ['build', '-t', '${_AR_PATH}/$PROJECT_ID/thomasflanigan/${_IMAGE}:test', '.']
- id: 'push'
  name: 'gcr.io/cloud-builders/docker'
  # args: ['push', '${_AR_PATH}/$PROJECT_ID/thomasflanigan/${_IMAGE}:$COMMIT_SHA']
  args: ['push', '${_AR_PATH}/$PROJECT_ID/thomasflanigan/${_IMAGE}:test']
# - id: 'deploy'
#   name: 'gcr.io/cloud-builders/gke-deploy'
#   args:
#   - apply
#   - --filename=k8s-config.yaml
#   - --location=${_LOCATION}
#   - --cluster=${_CLUSTER}
# tags: ['tf-site']
